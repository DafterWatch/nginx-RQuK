(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{AMPi:function(t,e,n){"use strict";n.r(e),n.d(e,"TournamentsModule",function(){return T});var i=n("SVse"),r=n("s7LF"),o=n("iInd"),a=n("AytR"),s=n("8Y7J"),c=n("IheW");function b(t,e){if(1&t){const t=s.Kb();s.Jb(0,"input",11),s.Qb("ngModelChange",function(e){return s.cc(t),s.Ub().searchTerm=e})("keyup",function(){return s.cc(t),s.Ub().filterTournaments()}),s.Ib()}if(2&t){const t=s.Ub();s.Xb("ngModel",t.searchTerm)}}function d(t,e){1&t&&(s.Jb(0,"td"),s.Jb(1,"span",13),s.gc(2,"Cancelado"),s.Ib(),s.Ib())}function u(t,e){1&t&&(s.Jb(0,"td"),s.Jb(1,"span",14),s.gc(2,"No cancelado"),s.Ib(),s.Ib())}const l=function(t){return["edit",t]};function m(t,e){if(1&t&&(s.Jb(0,"tr"),s.Jb(1,"td"),s.gc(2),s.Ib(),s.Jb(3,"td"),s.gc(4),s.Ib(),s.Jb(5,"td"),s.gc(6),s.Ib(),s.Jb(7,"td"),s.gc(8),s.Vb(9,"date"),s.Ib(),s.fc(10,d,3,0,"td",9),s.fc(11,u,3,0,"td",9),s.Jb(12,"td"),s.Jb(13,"button",12),s.gc(14," Editar "),s.Ib(),s.Ib(),s.Ib()),2&t){const t=e.$implicit;s.wb(2),s.jc("",t.name," ",t.lastname,""),s.wb(2),s.hc(t.ci),s.wb(2),s.hc(t.award),s.wb(2),s.hc(s.Wb(9,8,t.dateaward,"dd-MM-yyyy")),s.wb(2),s.Xb("ngIf",t.received),s.wb(1),s.Xb("ngIf",!t.received),s.wb(2),s.Xb("routerLink",s.ac(11,l,t.id))}}function f(t,e){if(1&t&&(s.Jb(0,"div"),s.gc(1),s.Ib()),2&t){const t=s.Ub();s.wb(1),s.ic(' No se encontraron resultados para "',t.searchTerm,'". ')}}function h(t,e){1&t&&(s.Jb(0,"div",3),s.Jb(1,"div",4),s.Jb(2,"p"),s.gc(3,"No se encontraron ventas."),s.Ib(),s.Ib(),s.Ib())}let g=(()=>{class t{constructor(t){this.http=t,this.tournaments=[],this.filteredTournaments=[],this.showNoResults=!1,this.searchTerm=""}ngOnInit(){this.getTournaments()}filterTournaments(){const t=this.searchTerm.trim().toLowerCase();this.filteredTournaments=this.tournaments.filter(e=>e.name.toLowerCase().includes(t)||e.lastname.toLowerCase().includes(t)||e.ci.toLowerCase().includes(t)||new Date(e.dateaward).toLocaleDateString().includes(t)),this.showNoResults=0===this.filteredTournaments.length}getTournaments(){this.http.get(a.a.apiEndpoint+"/tournaments").subscribe(t=>{this.tournaments=t,this.tournaments.sort(function(t,e){return t.id>e.id?-1:t.id<e.id?1:0}),this.filteredTournaments=this.tournaments},t=>{console.error(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(c.a))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-tournaments-list"]],decls:28,vars:4,consts:[[1,"container"],[1,"d-flex","justify-content-between","mb-4","mt-4"],["routerLink","new",1,"btn","btn-primary"],[1,"row"],[1,"col-md-12"],["type","text","placeholder","Buscar prestamo...","class","form-control shadow-sm mb-3",3,"ngModel","ngModelChange","keyup",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","row",4,"ngIf"],["type","text","placeholder","Buscar prestamo...",1,"form-control","shadow-sm","mb-3",3,"ngModel","ngModelChange","keyup"],["type","button",1,"btn","btn-primary","m-1",3,"routerLink"],[1,"badge","bg-success"],[1,"badge","bg-danger"]],template:function(t,e){1&t&&(s.Jb(0,"div",0),s.Jb(1,"div",1),s.Jb(2,"h2"),s.gc(3,"Torneos"),s.Ib(),s.Jb(4,"button",2),s.gc(5,"Crear Nuevo"),s.Ib(),s.Ib(),s.Jb(6,"div",3),s.Jb(7,"div",4),s.fc(8,b,1,1,"input",5),s.Jb(9,"table",6),s.Jb(10,"thead"),s.Jb(11,"tr"),s.Jb(12,"th",7),s.gc(13,"Nombre Cliente"),s.Ib(),s.Jb(14,"th",7),s.gc(15,"CI Cliente"),s.Ib(),s.Jb(16,"th",7),s.gc(17,"Descripci\xf3n"),s.Ib(),s.Jb(18,"th",7),s.gc(19,"Fecha Prestamo"),s.Ib(),s.Jb(20,"th",7),s.gc(21,"Estado"),s.Ib(),s.Jb(22,"th",7),s.gc(23,"Acciones"),s.Ib(),s.Ib(),s.Ib(),s.Jb(24,"tbody"),s.fc(25,m,15,13,"tr",8),s.Ib(),s.Ib(),s.fc(26,f,2,1,"div",9),s.fc(27,h,4,0,"div",10),s.Ib(),s.Ib(),s.Ib()),2&t&&(s.wb(8),s.Xb("ngIf",e.tournaments.length>0),s.wb(17),s.Xb("ngForOf",e.filteredTournaments),s.wb(1),s.Xb("ngIf",e.showNoResults),s.wb(1),s.Xb("ngIf",!e.tournaments||!e.tournaments.length))},directives:[o.c,i.j,i.i,r.b,r.g,r.i],pipes:[i.d],styles:[""]}),t})();var p=n("PSD3"),w=n.n(p);function I(t,e){if(1&t&&(s.Jb(0,"option",17),s.gc(1),s.Ib()),2&t){const t=e.$implicit;s.Xb("value",t.ci),s.wb(1),s.jc("",t.ci," - ",t.name,"")}}function v(t,e){if(1&t&&(s.Jb(0,"div",18),s.Jb(1,"div",19),s.Jb(2,"h4"),s.gc(3,"Nombre Cliente:"),s.Ib(),s.Jb(4,"p"),s.gc(5),s.Ib(),s.Ib(),s.Ib()),2&t){const t=s.Ub();s.wb(5),s.jc("",t.form.value.nameclient," ",t.form.value.lastname,"")}}let J=(()=>{class t{constructor(t,e,n,i){this.fb=t,this.route=e,this.router=n,this.http=i,this.name="",this.imageurl="",this.description="",this.quantity=0,this.price=0,this.isNew=!0,this.clients=[],this.form=t.group({id:[0],idclient:[0],nameclient:[""],lastname:[""],ci:[""],award:["",[r.o.required]],received:[!1],dateaward:new Date})}ngOnInit(){this.getClients();let t=this.route.snapshot.paramMap.get("id");t&&(this.isNew=!1,this.http.get(a.a.apiEndpoint+"/tournaments/"+t).subscribe(t=>{this.form.patchValue({id:t.id,idclient:t.idclient,nameclient:t.name,lastname:t.lastname,ci:t.ci,award:t.award,received:t.received,dateaward:t.dateaward})},t=>{console.error(t)}))}onSubmit(){""!=this.form.value.nameclient&&0!=this.form.value.idclient?this.isNew?this.submitTourPost():this.submitPutTour():alert("Tiene que seleccionar un usuario en el campo del ci de clientes registrados, si no aparece porfavor registre al cliente")}getClients(){this.http.get(a.a.apiEndpoint+"/clients").subscribe(t=>{this.clients=t,this.clients.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})},t=>{console.error(t)})}saveCode(t){let e=t.target.value,n=this.clients.filter(t=>t.ci===e)[0];this.form.patchValue({idclient:n.id,nameclient:n.name,lastname:n.lastname,ci:n.ci})}submitTourPost(){this.http.post(a.a.apiEndpoint+"/tournaments",{idclient:this.form.value.idclient,award:this.form.value.award,received:this.form.value.received,dateaward:(new Date).toISOString().split("T")[0]}).subscribe(t=>{w.a.fire({icon:"success",title:"Saved!",text:""}),this.router.navigate(["/tournaments"])},t=>{console.error(t),w.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})}submitPutTour(){this.http.put(a.a.apiEndpoint+"/tournaments/"+this.form.value.id,{idclient:this.form.value.idclient,award:this.form.value.award,received:this.form.value.received,dateaward:this.form.value.dateaward}).subscribe(t=>{w.a.fire({icon:"success",title:"Edited!",text:""}),this.router.navigate(["/tournaments"])},t=>console.error(t))}}return t.\u0275fac=function(e){return new(e||t)(s.Gb(r.c),s.Gb(o.a),s.Gb(o.b),s.Gb(c.a))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-new-tournament"]],decls:25,vars:6,consts:[[1,"container","mt-4","w-100"],[1,"d-flex","justify-content-between","mb-4","mt-4"],[1,"card","p-3",3,"formGroup","submit"],[1,"form-group","mb-3"],["type","text","name","idclient","formControlName","ci","list","list-clients","id","input-datalist",1,"form-control",3,"ngModel","ngModelChange","change"],["id","list-clients"],[3,"value",4,"ngFor","ngForOf"],["class","mb-1",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["name","award","formControlName","award","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check"],["type","checkbox","id","received","formControlName","received",1,"form-check-input"],["for","received",1,"form-check-label"],[1,"d-flex","justify-content-center","m-1"],["type","submit",1,"btn","btn-primary","m-1",3,"disabled"],["type","button","routerLink","/tournaments",1,"btn","btn-secondary","m-1"],[3,"value"],[1,"mb-1"],[1,"form-group"]],template:function(t,e){1&t&&(s.Jb(0,"div",0),s.Jb(1,"div",1),s.Jb(2,"h2"),s.gc(3,"Registrar Nuevo Premio"),s.Ib(),s.Ib(),s.Jb(4,"form",2),s.Qb("submit",function(){return e.onSubmit()}),s.Jb(5,"div",3),s.Jb(6,"h4"),s.gc(7,"Carnet Cliente:"),s.Ib(),s.Jb(8,"input",4),s.Qb("ngModelChange",function(t){return e.form.value.ci=t})("change",function(t){return e.saveCode(t)}),s.Ib(),s.Jb(9,"datalist",5),s.fc(10,I,2,3,"option",6),s.Ib(),s.Ib(),s.fc(11,v,6,2,"div",7),s.Jb(12,"div",8),s.Jb(13,"h4",9),s.gc(14,"Descripci\xf3n"),s.Ib(),s.Jb(15,"textarea",10),s.Qb("ngModelChange",function(t){return e.form.value.award=t}),s.Ib(),s.Ib(),s.Jb(16,"div",11),s.Hb(17,"input",12),s.Jb(18,"h5",13),s.gc(19," Cancelado "),s.Ib(),s.Ib(),s.Jb(20,"div",14),s.Jb(21,"button",15),s.gc(22," Registrar "),s.Ib(),s.Jb(23,"button",16),s.gc(24," Cancelar "),s.Ib(),s.Ib(),s.Ib(),s.Ib()),2&t&&(s.wb(4),s.Xb("formGroup",e.form),s.wb(4),s.Xb("ngModel",e.form.value.ci),s.wb(2),s.Xb("ngForOf",e.clients),s.wb(1),s.Xb("ngIf",""!=e.form.value.ci),s.wb(4),s.Xb("ngModel",e.form.value.award),s.wb(6),s.Xb("disabled",e.form.invalid))},directives:[r.q,r.h,r.e,r.b,r.g,r.d,i.i,i.j,r.m,r.a,o.c,r.j,r.p],styles:[""]}),t})();const y=[{path:"",component:g},{path:"new",component:J},{path:"edit/:id",component:J}];let C=(()=>{class t{}return t.\u0275mod=s.Eb({type:t}),t.\u0275inj=s.Db({factory:function(e){return new(e||t)},imports:[[o.e.forChild(y)],o.e]}),t})(),T=(()=>{class t{}return t.\u0275mod=s.Eb({type:t}),t.\u0275inj=s.Db({factory:function(e){return new(e||t)},imports:[[i.b,C,r.f,r.l]]}),t})()}}]);