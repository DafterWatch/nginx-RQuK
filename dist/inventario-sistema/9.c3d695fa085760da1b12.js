(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{zk5F:function(t,e,b){"use strict";b.r(e),b.d(e,"DebtsModule",function(){return y});var n=b("SVse"),i=b("s7LF"),o=b("iInd"),a=b("AytR"),r=b("8Y7J"),d=b("IheW");function s(t,e){if(1&t){const t=r.Kb();r.Jb(0,"input",10),r.Qb("ngModelChange",function(e){return r.cc(t),r.Ub().searchTerm=e})("keyup",function(){return r.cc(t),r.Ub().filterDebts()}),r.Ib()}if(2&t){const t=r.Ub();r.Xb("ngModel",t.searchTerm)}}function c(t,e){1&t&&(r.Jb(0,"td"),r.Jb(1,"span",12),r.gc(2,"Deuda Pagada"),r.Ib(),r.Ib())}function u(t,e){1&t&&(r.Jb(0,"td"),r.Jb(1,"span",13),r.gc(2,"Deuda Vigente"),r.Ib(),r.Ib())}const l=function(t){return["edit",t]};function m(t,e){if(1&t&&(r.Jb(0,"tr"),r.Jb(1,"td"),r.gc(2),r.Ib(),r.Jb(3,"td"),r.gc(4),r.Ib(),r.Jb(5,"td"),r.gc(6),r.Ib(),r.Jb(7,"td"),r.gc(8),r.Ib(),r.Jb(9,"td"),r.gc(10),r.Ib(),r.Jb(11,"td"),r.gc(12),r.Ib(),r.Jb(13,"td"),r.gc(14),r.Vb(15,"date"),r.Ib(),r.fc(16,c,3,0,"td",8),r.fc(17,u,3,0,"td",8),r.Jb(18,"td"),r.Jb(19,"button",11),r.gc(20," Editar "),r.Ib(),r.Ib(),r.Ib()),2&t){const t=e.$implicit;r.wb(2),r.hc(t.productname),r.wb(2),r.ic("",t.quantity," Unidades"),r.wb(2),r.ic("",t.debtamount," Bs"),r.wb(2),r.ic("",t.paidamount," Bs"),r.wb(2),r.jc("",t.nameclient," ",t.lastname,""),r.wb(2),r.hc(t.ci),r.wb(2),r.hc(r.Wb(15,11,t.datebuy,"dd-MM-yyyy")),r.wb(2),r.Xb("ngIf",t.debtamount==t.paidamount),r.wb(1),r.Xb("ngIf",t.debtamount!=t.paidamount),r.wb(2),r.Xb("routerLink",r.ac(14,l,t.id))}}function p(t,e){if(1&t&&(r.Jb(0,"div"),r.gc(1),r.Ib()),2&t){const t=r.Ub();r.wb(1),r.ic(' No se encontraron resultados para "',t.searchTerm,'". ')}}function h(t,e){1&t&&(r.Jb(0,"div",2),r.Jb(1,"div",3),r.Jb(2,"p"),r.gc(3,"No se encontraron ventas."),r.Ib(),r.Ib(),r.Ib())}let g=(()=>{class t{constructor(t){this.http=t,this.debts=[],this.filteredDebts=[],this.showNoResults=!1,this.searchTerm=""}ngOnInit(){this.getDebts()}filterDebts(){const t=this.searchTerm.trim().toLowerCase();this.filteredDebts=this.debts.filter(e=>e.nameclient.toLowerCase().includes(t)||e.lastname.toLowerCase().includes(t)||e.ci.toLowerCase().includes(t)||e.productname.toLowerCase().includes(t)||new Date(e.datebuy).toLocaleDateString().includes(t)),this.showNoResults=0===this.filteredDebts.length}getDebts(){this.http.get(a.a.apiEndpoint+"/debts").subscribe(t=>{this.debts=t,this.debts.sort(function(t,e){return t.id>e.id?-1:t.id<e.id?1:0}),this.filteredDebts=this.debts},t=>{console.error(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(d.a))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-debts-list"]],decls:32,vars:4,consts:[[1,"container"],[1,"d-flex","justify-content-between","mb-4","mt-4"],[1,"row"],[1,"col-md-12"],["type","text","placeholder","Buscar prestamo...","class","form-control shadow-sm mb-3",3,"ngModel","ngModelChange","keyup",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","row",4,"ngIf"],["type","text","placeholder","Buscar prestamo...",1,"form-control","shadow-sm","mb-3",3,"ngModel","ngModelChange","keyup"],["type","button",1,"btn","btn-primary","m-1",3,"routerLink"],[1,"badge","bg-success"],[1,"badge","bg-danger"]],template:function(t,e){1&t&&(r.Jb(0,"div",0),r.Jb(1,"div",1),r.Jb(2,"h2"),r.gc(3,"Prestamos"),r.Ib(),r.Ib(),r.Jb(4,"div",2),r.Jb(5,"div",3),r.fc(6,s,1,1,"input",4),r.Jb(7,"table",5),r.Jb(8,"thead"),r.Jb(9,"tr"),r.Jb(10,"th",6),r.gc(11,"Producto"),r.Ib(),r.Jb(12,"th",6),r.gc(13,"Cantidad"),r.Ib(),r.Jb(14,"th",6),r.gc(15,"Deuda Saldo"),r.Ib(),r.Jb(16,"th",6),r.gc(17,"Total Cancelado"),r.Ib(),r.Jb(18,"th",6),r.gc(19,"Nombre Cliente"),r.Ib(),r.Jb(20,"th",6),r.gc(21,"CI Cliente"),r.Ib(),r.Jb(22,"th",6),r.gc(23,"Fecha Prestamo"),r.Ib(),r.Jb(24,"th",6),r.gc(25,"Estado"),r.Ib(),r.Jb(26,"th",6),r.gc(27,"Acciones"),r.Ib(),r.Ib(),r.Ib(),r.Jb(28,"tbody"),r.fc(29,m,21,16,"tr",7),r.Ib(),r.Ib(),r.fc(30,p,2,1,"div",8),r.fc(31,h,4,0,"div",9),r.Ib(),r.Ib(),r.Ib()),2&t&&(r.wb(6),r.Xb("ngIf",e.debts.length>0),r.wb(23),r.Xb("ngForOf",e.filteredDebts),r.wb(1),r.Xb("ngIf",e.showNoResults),r.wb(1),r.Xb("ngIf",!e.debts||!e.debts.length))},directives:[n.j,n.i,i.b,i.g,i.i,o.c],pipes:[n.d],styles:[""]}),t})();var f=b("PSD3"),I=b.n(f);let J=(()=>{class t{constructor(t,e,b,n){this.fb=t,this.route=e,this.router=b,this.http=n,this.name="",this.imageurl="",this.description="",this.quantity=0,this.price=0,this.isNew=!0,this.form=t.group({id:[0],idclient:[0],idproduct:[0],debtamount:[0],paidamount:[0,[i.o.required]],idbuy:[0],nameclient:[""],lastname:[""],ci:[""],productname:[""],quantity:[0],datebuy:[""]})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.isNew=!1,this.http.get(a.a.apiEndpoint+"/debts/"+t).subscribe(t=>{this.form.patchValue({id:t.id,idclient:t.idclient,idproduct:t.idproduct,debtamount:parseFloat(t.debtamount),paidamount:parseFloat(t.paidamount),idbuy:parseInt(t.idbuy),nameclient:t.nameclient,lastname:t.lastname,ci:t.ci,productname:t.productname,quantity:parseInt(t.quantity),datebuy:t.datebuy})},t=>{console.error(t)}))}onSubmit(){this.form.value.paidamount>=0?this.form.value.paidamount<=this.form.value.debtamount?this.http.put(a.a.apiEndpoint+"/debts/"+this.form.value.id,{idclient:this.form.value.idclient,idproduct:this.form.value.idproduct,debtamount:this.form.value.debtamount,paidamount:this.form.value.paidamount,idbuy:this.form.value.idbuy}).subscribe(t=>{I.a.fire({icon:"success",title:"Edited!",text:""}),this.router.navigate(["/debts"])},t=>console.error(t)):alert("El monto a cancelar tiene que ser menor o igual al monto total de la deuda"):alert("El monto a pagar tiene que ser 0 o mayor")}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(i.c),r.Gb(o.a),r.Gb(o.b),r.Gb(d.a))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-new-debt"]],decls:50,vars:13,consts:[[1,"container","mt-4","w-100"],[1,"card","p-3",3,"formGroup","submit"],[1,"mb-1"],[1,"form-group"],[1,"form-label"],["type","number","name","paidamount","formControlName","paidamount","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-center","m-1"],["type","submit",1,"btn","btn-primary","m-1",3,"disabled"],["type","button","routerLink","/debts",1,"btn","btn-secondary","m-1"]],template:function(t,e){1&t&&(r.Jb(0,"div",0),r.Jb(1,"h2"),r.gc(2,"Editar Prestamo"),r.Ib(),r.Jb(3,"form",1),r.Qb("submit",function(){return e.onSubmit()}),r.Jb(4,"div",2),r.Jb(5,"div",3),r.Jb(6,"h5"),r.gc(7,"Nombre Cliente:"),r.Ib(),r.Jb(8,"p"),r.gc(9),r.Ib(),r.Ib(),r.Ib(),r.Jb(10,"div",2),r.Jb(11,"div",3),r.Jb(12,"h5"),r.gc(13,"Carnet Identidad:"),r.Ib(),r.Jb(14,"p"),r.gc(15),r.Ib(),r.Ib(),r.Ib(),r.Jb(16,"div",2),r.Jb(17,"div",3),r.Jb(18,"h5"),r.gc(19,"Producto:"),r.Ib(),r.Jb(20,"p"),r.gc(21),r.Ib(),r.Ib(),r.Ib(),r.Jb(22,"div",2),r.Jb(23,"div",3),r.Jb(24,"h5"),r.gc(25,"Fecha Prestamo:"),r.Ib(),r.Jb(26,"p"),r.gc(27),r.Vb(28,"date"),r.Ib(),r.Ib(),r.Ib(),r.Jb(29,"div",2),r.Jb(30,"div",3),r.Jb(31,"h5"),r.gc(32,"Cantidad:"),r.Ib(),r.Jb(33,"p"),r.gc(34),r.Ib(),r.Ib(),r.Ib(),r.Jb(35,"div",2),r.Jb(36,"div",3),r.Jb(37,"h5"),r.gc(38,"Monto Total Prestamo:"),r.Ib(),r.Jb(39,"p"),r.gc(40),r.Ib(),r.Ib(),r.Ib(),r.Jb(41,"div",2),r.Jb(42,"h5",4),r.gc(43,"Monto Pagado"),r.Ib(),r.Jb(44,"input",5),r.Qb("ngModelChange",function(t){return e.form.value.paidamount=t}),r.Ib(),r.Ib(),r.Jb(45,"div",6),r.Jb(46,"button",7),r.gc(47," Registrar "),r.Ib(),r.Jb(48,"button",8),r.gc(49," Cancelar "),r.Ib(),r.Ib(),r.Ib(),r.Ib()),2&t&&(r.wb(3),r.Xb("formGroup",e.form),r.wb(6),r.jc("",e.form.value.nameclient," ",e.form.value.lastname,""),r.wb(6),r.hc(e.form.value.ci),r.wb(6),r.hc(e.form.value.productname),r.wb(6),r.hc(r.Wb(28,10,e.form.value.datebuy,"dd-MM-yyyy")),r.wb(7),r.ic("",e.form.value.quantity," Unidades"),r.wb(6),r.ic("",e.form.value.debtamount," Bs"),r.wb(4),r.Xb("ngModel",e.form.value.paidamount),r.wb(2),r.Xb("disabled",e.form.invalid))},directives:[i.q,i.h,i.e,i.k,i.b,i.g,i.d,i.m,o.c],pipes:[n.d],styles:[""]}),t})();const w=[{path:"",component:g},{path:"new",component:J},{path:"edit/:id",component:J}];let v=(()=>{class t{}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},imports:[[o.e.forChild(w)],o.e]}),t})(),y=(()=>{class t{}return t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({factory:function(e){return new(e||t)},imports:[[n.b,v,i.f,i.l]]}),t})()}}]);